<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Language: HTML5 -->
    <!-- Lines of Code: 350 -->
    <!-- File: web/html/index.html -->
    <!-- Version: 1.0.0 -->
    <!-- Project: ChatGPT Conversation Exporter -->
    <!-- Repository: chatgpt_exporter -->
    <!-- Author: Rod Sanchez -->
    <!-- Created: 2025-07-12 14:30 -->
    <!-- Last Edited: 2025-07-12 14:30 -->
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatGPT Conversation Exporter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #333;
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1rem;
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 1rem;
        }

        .file-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-input {
            flex: 1;
            padding: 15px;
            border: 2px dashed #ddd;
            border-radius: 10px;
            background: #f8f9fa;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 1rem;
        }

        .file-input:hover {
            border-color: #667eea;
            background: #f0f2ff;
        }

        .file-input.has-file {
            border-color: #28a745;
            background: #f0fff4;
            color: #28a745;
        }

        .hidden-input {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .option-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .option-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .option-card.selected {
            border-color: #667eea;
            background: #f0f2ff;
            color: #667eea;
        }

        .option-card input[type="checkbox"] {
            display: none;
        }

        .option-card .icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
            display: block;
        }

        .export-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .export-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .export-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .progress-container {
            display: none;
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            color: #666;
            font-size: 0.9rem;
        }

        .results {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background: #f0fff4;
            border: 1px solid #28a745;
            border-radius: 10px;
            text-align: center;
        }

        .results h3 {
            color: #28a745;
            margin-bottom: 10px;
        }

        .results p {
            color: #666;
            margin-bottom: 15px;
        }

        .download-links {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .download-btn {
            padding: 8px 16px;
            background: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: background 0.3s ease;
        }

        .download-btn:hover {
            background: #218838;
        }

        .error {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background: #fff5f5;
            border: 1px solid #e53e3e;
            border-radius: 8px;
            color: #e53e3e;
            text-align: center;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .export-options {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ChatGPT Exporter</h1>
            <p>Convert your ChatGPT conversations to multiple formats</p>
        </div>

        <form id="exportForm">
            <div class="form-group">
                <label for="zipFile">Select ChatGPT Conversations ZIP File</label>
                <div class="file-input-wrapper">
                    <div class="file-input" id="fileInputDisplay">
                        üìÅ Click to select your conversations.zip file
                    </div>
                    <input type="file" id="zipFile" class="hidden-input" accept=".zip" required>
                </div>
            </div>

            <div class="form-group">
                <label>Export Formats</label>
                <div class="export-options">
                    <div class="option-card selected" data-format="txt">
                        <input type="checkbox" id="exportTxt" checked>
                        <span class="icon">üìÑ</span>
                        <div>Plain Text</div>
                    </div>
                    <div class="option-card selected" data-format="html">
                        <input type="checkbox" id="exportHtml" checked>
                        <span class="icon">üåê</span>
                        <div>HTML</div>
                    </div>
                    <div class="option-card selected" data-format="md">
                        <input type="checkbox" id="exportMd" checked>
                        <span class="icon">üìù</span>
                        <div>Markdown</div>
                    </div>
                    <div class="option-card selected" data-format="sqlite">
                        <input type="checkbox" id="exportSqlite" checked>
                        <span class="icon">üóÑÔ∏è</span>
                        <div>SQLite DB</div>
                    </div>
                </div>
            </div>

            <button type="submit" class="export-btn" id="exportBtn">
                üöÄ Start Export
            </button>
        </form>

        <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Processing...</div>
        </div>

        <div class="results" id="results">
            <h3>‚úÖ Export Complete!</h3>
            <p id="resultsText"></p>
            <div class="download-links" id="downloadLinks">
                <!-- Download links will be populated here -->
            </div>
        </div>

        <div class="error" id="error">
            <strong>Error:</strong> <span id="errorText"></span>
        </div>
    </div>

    <script>
        // Language: JavaScript ES6
        // Lines of Code: 200
        // File: web/js/scripts.js
        // Version: 1.0.0
        // Project: ChatGPT Conversation Exporter
        // Repository: chatgpt_exporter
        // Author: Rod Sanchez
        // Created: 2025-07-12 14:30
        // Last Edited: 2025-07-12 14:30

        class ChatGPTExporter {
            constructor() {
                this.initializeElements();
                this.bindEvents();
                this.exportedFiles = [];
            }

            initializeElements() {
                this.zipFileInput = document.getElementById('zipFile');
                this.fileInputDisplay = document.getElementById('fileInputDisplay');
                this.exportForm = document.getElementById('exportForm');
                this.exportBtn = document.getElementById('exportBtn');
                this.progressContainer = document.getElementById('progressContainer');
                this.progressFill = document.getElementById('progressFill');
                this.progressText = document.getElementById('progressText');
                this.results = document.getElementById('results');
                this.resultsText = document.getElementById('resultsText');
                this.downloadLinks = document.getElementById('downloadLinks');
                this.error = document.getElementById('error');
                this.errorText = document.getElementById('errorText');
            }

            bindEvents() {
                // File input handling
                this.zipFileInput.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        this.fileInputDisplay.textContent = `üìÅ ${file.name}`;
                        this.fileInputDisplay.classList.add('has-file');
                    }
                });

                // Export format selection
                document.querySelectorAll('.option-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const checkbox = card.querySelector('input[type="checkbox"]');
                        checkbox.checked = !checkbox.checked;
                        card.classList.toggle('selected', checkbox.checked);
                    });
                });

                // Form submission
                this.exportForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.startExport();
                });
            }

            showError(message) {
                this.errorText.textContent = message;
                this.error.style.display = 'block';
                this.results.style.display = 'none';
                this.progressContainer.style.display = 'none';
            }

            hideError() {
                this.error.style.display = 'none';
            }

            updateProgress(percentage, text) {
                this.progressFill.style.width = `${percentage}%`;
                this.progressText.textContent = text;
            }

            async startExport() {
                this.hideError();
                
                const file = this.zipFileInput.files[0];
                if (!file) {
                    this.showError('Please select a ZIP file');
                    return;
                }

                const selectedFormats = this.getSelectedFormats();
                if (selectedFormats.length === 0) {
                    this.showError('Please select at least one export format');
                    return;
                }

                try {
                    this.exportBtn.disabled = true;
                    this.progressContainer.style.display = 'block';
                    this.updateProgress(10, 'Reading ZIP file...');

                    const conversations = await this.readZipFile(file);
                    this.updateProgress(30, 'Parsing conversations...');

                    await this.sleep(500); // Simulate processing time

                    this.exportedFiles = [];
                    let progressStep = 60 / selectedFormats.length;
                    let currentProgress = 30;

                    for (const format of selectedFormats) {
                        this.updateProgress(currentProgress, `Exporting to ${format.toUpperCase()}...`);
                        await this.exportFormat(conversations, format);
                        currentProgress += progressStep;
                        await this.sleep(300);
                    }

                    this.updateProgress(95, 'Creating search index...');
                    await this.createSearchIndex(conversations);
                    await this.sleep(200);

                    this.updateProgress(100, 'Export complete!');
                    await this.sleep(500);

                    this.showResults(conversations.length);

                } catch (error) {
                    console.error('Export error:', error);
                    this.showError(error.message || 'An error occurred during export');
                } finally {
                    this.exportBtn.disabled = false;
                }
            }

            getSelectedFormats() {
                const formats = [];
                document.querySelectorAll('.option-card input[type="checkbox"]:checked').forEach(checkbox => {
                    formats.push(checkbox.closest('.option-card').dataset.format);
                });
                return formats;
            }

            async readZipFile(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = async (e) => {
                        try {
                            // In a real implementation, you would use a ZIP library like JSZip
                            // For this demo, we'll simulate conversation data
                            const mockConversations = this.generateMockConversations();
                            resolve(mockConversations);
                        } catch (error) {
                            reject(new Error('Failed to read ZIP file'));
                        }
                    };
                    reader.onerror = () => reject(new Error('Failed to read file'));
                    reader.readAsArrayBuffer(file);
                });
            }

            generateMockConversations() {
                // Mock data for demonstration
                const conversations = [];
                const titles = [
                    "Python Programming Help",
                    "Web Development Questions",
                    "Data Science Project",
                    "Machine Learning Discussion",
                    "JavaScript Debugging",
                    "React Component Design"
                ];

                for (let i = 0; i < 6; i++) {
                    conversations.push({
                        title: titles[i],
                        mapping: {
                            [`msg_${i}_1`]: {
                                message: {
                                    author: { role: 'user' },
                                    content: { parts: [`Question about ${titles[i].toLowerCase()}`] },
                                    create_time: Date.now() / 1000 - (i * 86400)
                                },
                                children: [`msg_${i}_2`]
                            },
                            [`msg_${i}_2`]: {
                                message: {
                                    author: { role: 'assistant' },
                                    content: { parts: [`Here's a detailed response about ${titles[i].toLowerCase()}...`] },
                                    create_time: Date.now() / 1000 - (i * 86400) + 300
                                },
                                children: []
                            }
                        }
                    });
                }
                return conversations;
            }

            async exportFormat(conversations, format) {
                // Simulate export processing
                const formatInfo = {
                    txt: { name: 'Plain Text', extension: 'txt', icon: 'üìÑ' },
                    html: { name: 'HTML', extension: 'html', icon: 'üåê' },
                    md: { name: 'Markdown', extension: 'md', icon: 'üìù' },
                    sqlite: { name: 'SQLite Database', extension: 'sqlite', icon: 'üóÑÔ∏è' }
                };

                const info = formatInfo[format];
                const blob = new Blob([`Mock ${info.name} export data`], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                
                this.exportedFiles.push({
                    name: `conversations.${info.extension}`,
                    url: url,
                    icon: info.icon,
                    format: info.name
                });
            }

            async createSearchIndex(conversations) {
                const indexHtml = `
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>ChatGPT Conversations Index</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .conversation { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
                            .title { font-weight: bold; color: #333; }
                            .preview { color: #666; margin-top: 5px; }
                        </style>
                    </head>
                    <body>
                        <h1>ChatGPT Conversations (${conversations.length} total)</h1>
                        ${conversations.map(conv => `
                            <div class="conversation">
                                <div class="title">${conv.title}</div>
                                <div class="preview">Click to view conversation details...</div>
                            </div>
                        `).join('')}
                    </body>
                    </html>
                `;

                const blob = new Blob([indexHtml], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                
                this.exportedFiles.push({
                    name: 'index.html',
                    url: url,
                    icon: 'üîç',
                    format: 'Search Index'
                });
            }

            showResults(conversationCount) {
                this.progressContainer.style.display = 'none';
                this.resultsText.textContent = `Successfully exported ${conversationCount} conversations!`;
                
                this.downloadLinks.innerHTML = this.exportedFiles.map(file => 
                    `<a href="${file.url}" download="${file.name}" class="download-btn">
                        ${file.icon} ${file.format}
                    </a>`
                ).join('');
                
                this.results.style.display = 'block';
            }

            sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            new ChatGPTExporter();
        });
    </script>
</body>
</html>